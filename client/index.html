<html>
<head>
    <style>
        .active-buzzer {
            background: green;
        }
        .inactive-buzzer {
            background:red;
        }
    </style>
</head>
<body>
<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="http://autobahn.s3.amazonaws.com/js/autobahn.min.jgz"></script>

<div id="buzzer-status" style="width:200px;height:200px;background:red;"></div>
<br />
<br />
<button id="buzzer" disabled>Buzz In</button>



<script>

    var buzzer_status = $('#buzzer-status');

    var conn = new ab.Session('ws://localhost:9001',
            function() {
                conn.subscribe('buzzer', function(topic, data) {
                    // This is where you would add the new article to the DOM (beyond the scope of this tutorial)
                    console.log(data);
                });

                conn.subscribe('com.sc2ctl.jeopardy.buzzer_status', processBuzzerActiveResult);
            },
            function() {
                console.warn('WebSocket connection closed');
            },
            {'skipSubprotocolCheck': true}
    );

    function processBuzzerActiveResult(topic, data) {
        data = JSON.parse(data);

        if (data.active == true) {
            setBuzzerActive(buzzer_status);
        }
    }


    function setBuzzerActive(buzzer) {
        buzzer.removeClass('inactive-buzzer').addClass('active-buzzer');
    }


</script>

</body>
</html>
